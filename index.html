
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-a9fde460.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-5cf8f9a6.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting Started">Getting Started</a>
          </li>
          <li>
            <a href="#authorization" class="toc-h1 toc-link" data-title="Authorization">Authorization</a>
          </li>
          <li>
            <a href="#intent-recognition" class="toc-h1 toc-link" data-title="Intent Recognition">Intent Recognition</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#chat-automation" class="toc-h1 toc-link" data-title="Chat Automation">Chat Automation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#query-parameters" class="toc-h2 toc-link" data-title="Query Parameters">Query Parameters</a>
                  </li>
                  <li>
                    <a href="#start-a-conversation" class="toc-h2 toc-link" data-title="Start a conversation">Start a conversation</a>
                  </li>
                  <li>
                    <a href="#send-a-visitor-message" class="toc-h2 toc-link" data-title="Send a visitor message">Send a visitor message</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#suggestion-engine" class="toc-h1 toc-link" data-title="Suggestion Engine">Suggestion Engine</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-suggestions-visitor" class="toc-h2 toc-link" data-title="/api/suggestions/visitor">/api/suggestions/visitor</a>
                  </li>
                  <li>
                    <a href="#api-suggestions-agent" class="toc-h2 toc-link" data-title="/api/suggestions/agent">/api/suggestions/agent</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#ticket-automation-with-salesforce" class="toc-h1 toc-link" data-title="Ticket Automation with Salesforce">Ticket Automation with Salesforce</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#salesforce-ticket-converse" class="toc-h2 toc-link" data-title="/salesforce/ticket/converse">/salesforce/ticket/converse</a>
                  </li>
                  <li>
                    <a href="#salesforce-ticket-error" class="toc-h2 toc-link" data-title="/salesforce/ticket/error">/salesforce/ticket/error</a>
                  </li>
                  <li>
                    <a href="#gdpr-salesforce-delete-user-data" class="toc-h2 toc-link" data-title="/gdpr/salesforce/delete-user-data">/gdpr/salesforce/delete-user-data</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#markdown-syntax" class="toc-h1 toc-link" data-title="Markdown Syntax">Markdown Syntax</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sub-section" class="toc-h2 toc-link" data-title="Sub Section">Sub Section</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://ultimate.ai'>Request a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='getting-started'>Getting Started</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris scelerisque magna eu sapien rutrum euismod. Praesent est urna, hendrerit vitae luctus non, mollis non odio. Suspendisse potenti. Pellentesque pharetra ultrices lectus, sit amet accumsan justo pellentesque pretium. Quisque et mattis leo, ut elementum magna. Praesent at placerat quam. Ut tellus quam, consectetur quis metus sit amet, fermentum suscipit tortor. Donec elit elit, pellentesque a turpis a, porttitor auctor metus. Fusce non rhoncus erat, quis placerat tortor. Morbi molestie porta purus et consequat. Aliquam laoreet at leo fermentum ornare. Fusce ut lobortis tortor, in tincidunt purus.</p>

<p>Pellentesque mollis purus dapibus odio ultricies, nec blandit enim pulvinar. Nam in mauris pretium, hendrerit dui nec, sollicitudin ligula. Pellentesque viverra mi felis, in vehicula eros feugiat sed. Aenean semper erat et tellus iaculis, at facilisis nulla lacinia. Aenean tincidunt ac leo in porttitor. Ut quis tincidunt libero, id fermentum nunc. Nam vulputate eu eros nec euismod. Nulla nec interdum mi. Maecenas non eros tincidunt, gravida elit ornare, pharetra turpis. Vestibulum cursus a odio quis efficitur. Donec egestas pellentesque ligula at semper. Ut eu leo at tellus blandit euismod.</p>
<h1 id='authorization'>Authorization</h1>
<p>Requires a header named <code>authorization</code>, the value of which will be provided by ultimate.ai</p>
<h1 id='intent-recognition'>Intent Recognition</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris scelerisque magna eu sapien rutrum euismod. Praesent est urna, hendrerit vitae luctus non, mollis non odio. Suspendisse potenti. Pellentesque pharetra ultrices lectus, sit amet accumsan justo pellentesque pretium. Quisque et mattis leo, ut elementum magna. Praesent at placerat quam. Ut tellus quam, consectetur quis metus sit amet, fermentum suscipit tortor. Donec elit elit, pellentesque a turpis a, porttitor auctor metus. Fusce non rhoncus erat, quis placerat tortor. Morbi molestie porta purus et consequat. Aliquam laoreet at leo fermentum ornare. Fusce ut lobortis tortor, in tincidunt purus.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /api/intents</code></p>
<h1 id='chat-automation'>Chat Automation</h1>
<p>This endpoint is used to automate chat conversations. It accepts a visitor message and responds with a bot response and attached actions. 
A response could be a simple text reply or a dialog which includes multiple messages.
In the current API version, the only action supported is <code>forwardToHuman</code> paramter, that flags whether the conversation should be escalated to a human (the agent owning the conversation should be changed from bot to human agent / human department). </p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /api/automation/visitor</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>botId</td>
<td>string</td>
<td>true</td>
<td>ID of the bot used to identify which bot sends the reply. This ID will be provided by ultimate.ai</td>
</tr>
<tr>
<td>conversationId</td>
<td>string</td>
<td>true</td>
<td>An ID used by the chat provider to identify the conversation. The chat provider can decide the format.</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>true if type is &#39;message&#39;</td>
<td>The text message that the visitor typed into the chat. The message is optional if type is join. If a button was pressed, the message should be the value of the button (unless it’s a link button).</td>
</tr>
<tr>
<td>type</td>
<td>enum [&#39;message&#39;, &#39;join&#39;]</td>
<td>false</td>
<td>Use type <code>join</code> when the conversation is created. The welcomeMessage will be given as a response in case there is one for the given bot. Use type <code>message</code> if sending a visitor message.</td>
</tr>
<tr>
<td>platform</td>
<td>enum [&#39;liveAgent&#39;, &#39;giosg&#39;, &#39;liveChat&#39;, &#39;zendesk&#39;, &#39;freshchat&#39;, &#39;sap&#39;, &#39;facebook&#39;, &#39;zendeskSupport&#39;]</td>
<td>false</td>
<td>CRM Platform this chat is integrated with, if applicable.</td>
</tr>
</tbody></table>
<h2 id='start-a-conversation'>Start a conversation</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://chat.ultimate.ai/api/automation/visitor'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json;charset=UTF-8'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{"botId":"BOT ID PROVIDED BY ULTIMATE.AI","conversationId":"NEW CONVERSATION ID","type":"join"}'</span> <span class="se">\</span>
  <span class="nt">--compressed</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">startConversation</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">https://chat.ultimate.ai/api/automation/visitor</span><span class="dl">'</span><span class="p">,</span> 
        <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
            <span class="p">},</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">botId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BOT ID PROVIDED BY ULTIMATE.AI</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">conversationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">NEW CONVERSATION ID</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">join</span><span class="dl">'</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">startConversation</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">constole</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"confidenceThreshold"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w">
  </span><span class="nl">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello :)"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"forwardToHuman"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"secondMessage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"How can I help you today?"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"predictedIntents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>To start a conversation (ie: when the chat widget is opened) create a new <code>conversationId</code> and POST a message of type <code>join</code> with the new conversationId. 
The API will respond with the welcomeMessage if there is a welcomeMessage defined for the given bot.</p>

<p>All subsequent visitor messages sent in the chat, should use the same conversationId as the one used to start the conversation.</p>

<aside class="notice">
Remember — a conversation needs to be started first, by sending a message of type join before visitor messages of type message can be sent in the conversation.
</aside>
<h2 id='send-a-visitor-message'>Send a visitor message</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://chat.ultimate.ai/api/automation/visitor'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json;charset=UTF-8'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{"botId":"BOT ID PROVIDED BY ULTIMATE.AI","conversationId":"CONVERSATION ID","type":"message" "message": "The shoes I have ordered are damaged."}'</span> <span class="se">\</span>
  <span class="nt">--compressed</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">sendMessage</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">https://chat.ultimate.ai/api/automation/visitor</span><span class="dl">'</span><span class="p">,</span> 
        <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
            <span class="p">},</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">botId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BOT ID PROVIDED BY ULTIMATE.AI</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">conversationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CONVERSATION ID</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">The shoes I have ordered are damaged.</span><span class="dl">'</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">startConversation</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">constole</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"confidenceThreshold"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w">
  </span><span class="nl">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I'm sorry to hear that, that must be frustrating. When did the damage happen?"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"forwardToHuman"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Delivered damaged."</span><span class="w"> 
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"After use."</span><span class="w"> 
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"predictedIntents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer Claims"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567891"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Missing Item"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Once a <a href="#start-a-conversation">conversation was started</a> POST visitor messages with the same <code>conversationId</code> used when starting the conversation and use the message type <code>message</code> to receive an automated reply.
The response will contain an array with the bot messages for the highest predicted intent as well as a list of predicted intents for the given visitor message. 
Bot messages will contain the text of the reply and might also contain an array of buttons and a flag when conversations should be escalated to a human agent.</p>

<p>When a user presses one of the given buttons, send the value of the button as a message in the conversation to continue the dialogue.</p>

<p>In case you are escalating the conversation to a human agent use the <a href="#api-suggestions-agent">suggestions/agent endpoint</a> to send the agent&#39;s messages to the conversation.</p>
<h1 id='suggestion-engine'>Suggestion Engine</h1><h2 id='api-suggestions-visitor'>/api/suggestions/visitor</h2>
<p>Sed ac lectus eros. Ut sit amet bibendum lorem. Maecenas vel molestie ex. Suspendisse at ipsum quis tellus vehicula molestie gravida nec orci. Praesent feugiat dui quis elit fringilla, sit amet bibendum nibh elementum. Sed luctus nec ex ut egestas. Duis nulla enim, ornare rhoncus consectetur sit amet, vehicula eu nunc. Quisque laoreet ipsum nisi. In pellentesque tellus orci, ut porttitor lacus tempus vel. Aliquam pharetra laoreet purus, ac tincidunt lectus dignissim eu. Phasellus imperdiet tincidunt pulvinar. Aliquam vitae nisi mi. Aliquam ut dolor consectetur, vestibulum nunc non, blandit augue. Pellentesque sit amet fermentum dolor. Sed quis porttitor massa, id sagittis mi.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /api/suggestions/visitor</code></p>
<h2 id='api-suggestions-agent'>/api/suggestions/agent</h2>
<p>Aliquam erat volutpat. Nunc commodo dapibus molestie. Integer eu erat dictum, efficitur ante at, euismod ex. Ut id erat finibus, suscipit nisl quis, pharetra ante. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aliquam vulputate in turpis sed auctor. Maecenas cursus dictum risus eu mollis. Nunc molestie efficitur tellus, et dictum erat accumsan eu. In sagittis metus neque, vel aliquam felis tincidunt nec.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /api/suggestions/agent</code></p>
<h1 id='ticket-automation-with-salesforce'>Ticket Automation with Salesforce</h1><h2 id='salesforce-ticket-converse'>/salesforce/ticket/converse</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris scelerisque magna eu sapien rutrum euismod. Praesent est urna, hendrerit vitae luctus non, mollis non odio. Suspendisse potenti. Pellentesque pharetra ultrices lectus, sit amet accumsan justo pellentesque pretium. Quisque et mattis leo, ut elementum magna. Praesent at placerat quam. Ut tellus quam, consectetur quis metus sit amet, fermentum suscipit tortor. Donec elit elit, pellentesque a turpis a, porttitor auctor metus. Fusce non rhoncus erat, quis placerat tortor. Morbi molestie porta purus et consequat. Aliquam laoreet at leo fermentum ornare. Fusce ut lobortis tortor, in tincidunt purus.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /salesforce/ticket/converse</code></p>
<h2 id='salesforce-ticket-error'>/salesforce/ticket/error</h2>
<p>Pellentesque mollis purus dapibus odio ultricies, nec blandit enim pulvinar. Nam in mauris pretium, hendrerit dui nec, sollicitudin ligula. Pellentesque viverra mi felis, in vehicula eros feugiat sed. Aenean semper erat et tellus iaculis, at facilisis nulla lacinia. Aenean tincidunt ac leo in porttitor. Ut quis tincidunt libero, id fermentum nunc. Nam vulputate eu eros nec euismod. Nulla nec interdum mi. Maecenas non eros tincidunt, gravida elit ornare, pharetra turpis. Vestibulum cursus a odio quis efficitur. Donec egestas pellentesque ligula at semper. Ut eu leo at tellus blandit euismod.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /salesforce/ticket/error</code></p>
<h2 id='gdpr-salesforce-delete-user-data'>/gdpr/salesforce/delete-user-data</h2>
<p>Nullam justo purus, faucibus non semper at, eleifend et justo. Donec lobortis leo eget eros viverra rhoncus. Nam posuere massa felis, eget elementum felis placerat et. Donec eu odio sapien. Vestibulum ut ante ut eros pretium mollis. Sed sollicitudin semper augue quis condimentum. Donec sed rutrum arcu. Pellentesque suscipit dolor ut orci imperdiet, fringilla auctor nunc pellentesque. Praesent auctor risus in libero pulvinar aliquet.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST /gdpr/salesforce/delete-user-data</code></p>
<h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>
<h1 id='markdown-syntax'>Markdown Syntax</h1>
<p>Here is a little cheat sheet providing an overview of different components that can be used in these markdown files to show you how things can be documented and how that will be displayed in the slate documentation.
Please make sure to remove this section from the list includes in <code>source/index.htl.md</code> before we publish.</p>

<p>You can find more information in the <a href="https://calendar.google.com/calendar/u/0/r?tab=kc&amp;pli=1">Slate Wiki</a>.</p>
<h2 id='sub-section'>Sub Section</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://my-api.com/endpoint"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'authorization: API_TOKEN'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'content-type: application/json;charset=UTF-8'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{"parameter":"value"}'</span> <span class="se">\</span>
<span class="nt">--compressed</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">queryData</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">https://my-api.com/endpoint</span><span class="dl">'</span><span class="p">,</span> 
        <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">authorization</span><span class="dl">'</span><span class="p">:</span> <span class="nx">API_TOKEN</span>
            <span class="p">},</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">parameter</span><span class="p">:</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">queryData</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">constole</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div>
<blockquote>
<p>Code Annotations will appear in all tabs:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Value"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Value"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>This section will also appear as an element in the navigation.
There are two code examples for this sub section. if you want to display more tabs with other languages, add them to the list of languages in <code>source/index.html.md</code> and then add code examples for those languages where they are needed.</p>
<h3 id='sub-sub-section-i'>Sub Sub Section I</h3>
<p>This headline can be used to divide your documentation into several sections, that won&#39;t be listed separately in the navigation.</p>

<aside class="notice">
Useful Information
</aside>

<aside class="success">
A Success Message
</aside>

<aside class="warning">
A Warning
</aside>
<h3 id='sub-sub-section-ii'>Sub Sub Section II</h3>
<table><thead>
<tr>
<th>Column 1</th>
<th>Column 2</th>
<th>Column 3</th>
</tr>
</thead><tbody>
<tr>
<td>key 1</td>
<td>value 1</td>
<td>Lorem ipsum dolor sit amet</td>
</tr>
<tr>
<td>key 2</td>
<td>value 2</td>
<td>Mauris scelerisque magna eu sapien rutrum euismod</td>
</tr>
<tr>
<td>key 3</td>
<td>value 3</td>
<td>Praesent est urna, hendrerit vitae luctus non</td>
</tr>
<tr>
<td>key 4</td>
<td>value 4</td>
<td>Ut tellus quam, consectetur quis metus sit amet</td>
</tr>
<tr>
<td>key 5</td>
<td>value 5</td>
<td>Aliquam laoreet at leo fermentum ornare</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
