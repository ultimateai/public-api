
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-a9fde460.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-5cf8f9a6.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#chat-automation" class="toc-h1 toc-link" data-title="Chat Automation">Chat Automation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#chat-automation-http-request" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#chat-automation-authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#chat-automation-request" class="toc-h2 toc-link" data-title="Request">Request</a>
                  </li>
                  <li>
                    <a href="#chat-automation-response" class="toc-h2 toc-link" data-title="Response">Response</a>
                  </li>
                  <li>
                    <a href="#chat-automation-usage" class="toc-h2 toc-link" data-title="Usage">Usage</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#intent-recognition" class="toc-h1 toc-link" data-title="Intent Recognition">Intent Recognition</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#intent-recognition-http-request" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#intent-recognition-authorization" class="toc-h2 toc-link" data-title="Authorization">Authorization</a>
                  </li>
                  <li>
                    <a href="#intent-recognition-request" class="toc-h2 toc-link" data-title="Request">Request</a>
                  </li>
                  <li>
                    <a href="#intent-recognition-response" class="toc-h2 toc-link" data-title="Response">Response</a>
                  </li>
                  <li>
                    <a href="#intent-recognition-usage" class="toc-h2 toc-link" data-title="Usage">Usage</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Build your customer service solution your way with our Public APIs.</p>

<p>Whether you want to build a chat bot for your own website, 
integrate our solution into different systems to support your agents, 
or use our named entity recognition to extract pieces of information 
from any text data, our REST API gives you access our services,
so you can build the solution that suits your needs.</p>

<p>To get started, request your Access Token from <a href="https://ultimate.ai">here</a>.</p>
<h1 id='chat-automation'>Chat Automation</h1>
<p>This endpoint can be used to automate chat conversations.
It accepts a visitor message and responds with a bot reply and attached actions.
A response could be a simple text reply or a dialog which includes multiple messages.</p>

<p>In the current API version, the only action supported is the <code>forwardToHuman</code> 
parameter, that flags whether the conversation should be escalated to a human agent.
The agent owning the conversation should then be changed from bot to  a human agent /
human department.</p>
<h2 id='chat-automation-http-request'>HTTP Request</h2>
<p>Method: <code>POST</code> </p>

<p>Endpoint <code>/api/v2/automation</code></p>
<h2 id='chat-automation-authentication'>Authentication</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://chat.ultimate.ai/api/v2/automation'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Basic {basicAuthToken}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">https://chat.ultimate.ai/api/v2/automation</span><span class="dl">'</span><span class="p">,</span> 
    <span class="p">{</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Basic {basicAuthToken}</span><span class="dl">'</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
<p>This endpoint is protected by <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">Basic Access Athentication</a>.</p>

<p>If you are a client already, you can create your basic access token by generating a 
<a href="https://en.wikipedia.org/wiki/Base64">Base64</a> encoded string using your email and password 
joined by a colon: <code>jane.doe@email.com:janesPassword</code></p>

<p>If you are not a client yet, you can request access to try out the API from 
<a href="https://ultimate.ai">here</a>.</p>

<p>Once you have your Basic Auth Token, you can authorize to the API by setting 
a header named <code>Authorization</code> containing your token in the form of 
<code>Basic {basicAuthToken}</code>.</p>

<aside class="notice">
Please do not share your auth token with other users or applications 
and don't publish them in public code repositories.
</aside>
<h2 id='chat-automation-request'>Request</h2>
<p>Send your request as a JSON with MIME-type of application/json.</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"botId"</span><span class="p">:</span><span class="s2">"1a2b3c4d5e6f7g8h9i0j1k2l"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"conversationId"</span><span class="p">:</span><span class="s2">"12345678987654321"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"eventType"</span><span class="p">:</span><span class="s2">"message"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"text"</span><span class="p">:</span><span class="s2">"Hello! My email is jane.doe@email.com"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"metaData"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"name"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"value"</span><span class="p">:</span><span class="s2">"Jane Doe"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>botId</strong></td>
<td>string</td>
<td>true</td>
<td>ID of the bot that will sends the reply.<br />You can find the ID of your bot in our dashboard, or talk to your Customer Success Manger.</td>
</tr>
<tr>
<td><strong>conversationId</strong></td>
<td>string</td>
<td>true</td>
<td>An ID used by the chat provider to identify the conversation.<br />The chat provider can decide the format.</td>
</tr>
<tr>
<td><strong>text</strong></td>
<td>string</td>
<td>true<br />if <code>eventType</code> is <code>message</code></td>
<td>The text message that the visitor typed into the chat.<br />The text is optional if the <code>eventType</code> is <code>startSession</code> or <code>endSession</code>.<br />If a button was pressed, send the value of the button as text (unless it’s a link button).</td>
</tr>
<tr>
<td><strong>eventType</strong></td>
<td>enum [<code>startSession</code>, <code>message</code>, <code>endSession</code>]</td>
<td>true</td>
<td>Use <code>startSession</code> when the conversation is created. The welcomeMessage will be given as a response in case there is one for the given bot.<br />Use <code>message</code> if sending a visitor message.<br />Use <code>endSession</code> to end the session. Otherwise the Session will end automatically after 2 hours.</td>
</tr>
<tr>
<td><strong>metaData</strong></td>
<td>array[<code>MetaData</code>]</td>
<td>false</td>
<td>Sending metaData gives you the ability to send metadata on the user or the session of the conversation. These params will be saved on the session and can be used by the bot to personalize the conversation flows.<br /><br />Each object of type <code>MetaData</code> in the array needs to contain the following fields:<br /><strong>key</strong> <code>string</code> - name the session parameter can be referenced by to personalize a conversation<br /><strong>value</strong> <code>string</code> - value of the session parameter, note that we only support values of type string at this moment<br /><strong>sanitize</strong> <code>bool</code> - optional field, should be set as true for PII data</td>
</tr>
</tbody></table>
<h2 id='chat-automation-response'>Response</h2>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello Jane Doe, How can i help you today?"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Type your question or select one of the options below:"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Support"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payments"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"External link"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://ultimate.ai"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"confidenceThreshold"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w">
    </span><span class="nl">"predictedIntents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee3593d2e4a8a47573252e8"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7038699984550476</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Intent Name 1 "</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f68bc4f140e681cbe8ad6ce"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14397311210632324</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Intent Name 2 "</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5eaaa247d377f1001d2628ad"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03942745178937912</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Intent Name 3"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fcdf52b618b6b0015da984f"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03256703168153763</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Intent Name 4"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d84f76a957e151f61ed5f17"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010709668509662151</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Intent Name 5"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jane.doe@email.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The endpoint will respond with a JSON with the following format:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>messages</strong></td>
<td>array[<code>Message</code>]</td>
<td>Array containing one or several messages to show to the visitor.<br /><br />Each object of type <code>Message</code> contains the following fields:<br /><strong>text</strong> <code>string</code> - Message string<br /><strong>forwardToHuman</strong> <code>bool</code> - When <code>true</code> this conversation needs to be forwarded to a human agent.<br ><strong>buttons</strong> <code>array[Button]</code> - Array of buttons to display to the visitor.<br /><br />Each object of type <code>Button</code> contains the following fields:<br /><strong>text</strong> <code>string</code> - value of the button, that is shown to the visitor. When the visitor presses the button, send the <code>text</code> as a message to the chat.<br /><strong>link</strong> <code>string</code> <code>nullable</code> - URL to go to, when the button is pressed. If the button has a link, don&#39;t send its value to the chat when pressed.</td>
</tr>
<tr>
<td><strong>confidenceThreshold</strong></td>
<td>float</td>
<td>Float value between 0 and 1 - this is the bot&#39;s confidence threshold to answer to a visitor message. If there is no intent predicted (see <code>predictedIntens</code>) above this threshold, the bolt will return the default reply.</td>
</tr>
<tr>
<td><strong>predictedIntents</strong></td>
<td>array[<code>Intent</code>]</td>
<td>Array containing intents that were predicted for the <code>text</code> sent in the request.<br /><br />Each object of type <code>Intent</code> contains the following fields:<br /><strong>value</strong> <code>string</code> - Unique ID identifying this intent.<br /><strong>name</strong> <code>string</code> - the intent&#39;s name<br /><strong>confidence</strong> <code>float</code> - Float value between 0 and 1 - giving the confidence with which this intent was predicted for the given <code>text</code>.</td>
</tr>
<tr>
<td><strong>entities</strong></td>
<td>array [<code>Entity</code>]</td>
<td>Array of entities that were extracted from the visitor message given in the request.<br /><br />Each object of type <code>Entity</code> will have the following fields:<br /><strong>name</strong> <code>string</code> - Name of the recognized entity<br /><strong>value</strong> <code>string</code> - the value that was extracted from the visitor message</td>
</tr>
</tbody></table>
<h2 id='chat-automation-usage'>Usage</h2><h3 id='chat-automation-usage-start-a-conversation'>Start a conversation</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://chat.ultimate.ai/api/v2/automation'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Basic {basicAuthToken}'</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json;charset=UTF-8'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{"botId":"{botId}","conversationId":"{conversationId}","eventType":"startSession"}'</span> <span class="se">\</span>
  <span class="nt">--compressed</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">startConversation</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">https://chat.ultimate.ai/api/v2/automation</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Basic {basicAuthToken}</span><span class="dl">'</span>
            <span class="p">},</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">botId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{botId}</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">conversationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{conversationId}</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">eventType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">startSession</span><span class="dl">'</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">);</span>

<span class="nx">startConversation</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div>
<p>To start a new conversation (ie: when the chat widget is opened) 
create a new <code>conversationId</code> of type <code>string</code>. This ID needs to be unique 
to identify the conversation, but the format of it is up to you.
All subsequent visitor messages sent in the conversation, should use the same 
<code>conversationId</code> as the one used to start the conversation.</p>

<p>Send a <code>POST</code> request with your <code>conversationId</code>, your <code>botId</code> and the
<code>eventType: startSession</code> to start the conversation session.</p>

<p>The API will respond with a welcome message if there is a welcome message 
defined for the given bot. Otherwise the <code>messages</code> array in the response 
will be empty.</p>

<p>Once you have started a conversation session, you can start sending visitor messages
to the conversation. The session will end after 2 hours or when you send 
the <code>eventType: endSession</code> to the conversation.</p>

<aside class="notice">
Remember — a conversation needs to be started first, by sending a request with the eventType startSession before visitor messages can be sent in the conversation.
</aside>
<h3 id='chat-automation-usage-send-a-visitor-message'>Send a visitor message</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://chat.ultimate.ai/api/v2/automation'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Basic {basicAuthToken}'</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json;charset=UTF-8'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{"botId":"{botId}","conversationId":"${conversationId}","eventType":"message" "text": "Hello! My email is jane.doe@email.com"}, metaData: [{"key": "name", "value": "Jane Doe"}]'</span> <span class="se">\</span>
  <span class="nt">--compressed</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">sendMessage</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">https://chat.ultimate.ai/api/v2/automation</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Basic {basicAuthToken}</span><span class="dl">'</span>
            <span class="p">},</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">botId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{botId}</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">conversationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{conversationId}</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">eventType</span><span class="p">:</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello! My email is jane.doe@email.com</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">metaData</span><span class="p">:[</span>
                  <span class="p">{</span>
                    <span class="na">key</span><span class="p">:</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span>
                    <span class="na">value</span><span class="p">:</span><span class="dl">'</span><span class="s1">Jane Doe</span><span class="dl">'</span>
                  <span class="p">}</span>
               <span class="p">]</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">);</span>

<span class="nx">sendMessage</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div>
<p>Once you have started a conversation session, you can start sending visitor messages 
with the same <code>conversationId</code> used when starting the conversation.</p>

<p>Use the <code>eventType: message</code> to send a visitor message receive an automated reply.</p>

<p>The response will contain an array with the bot messages for the highest predicted 
intent as well as a list of predicted intents for the given visitor message.</p>

<p>Bot messages will contain the text of the reply and might also contain an array of 
buttons and the flag <code>forwardToHuman</code> when conversations should be escalated 
to a human agent.</p>

<p>When a user presses one of the given buttons, send the value of the button 
as a message in the conversation to continue the dialogue. 
If the button has a link, the visitor should be redirected to the link address, 
the dialogue will not continue in this case. </p>

<p>In case you are escalating the conversation to a human agent, 
use our <a href="#suggestion-engine">Suggestion Engine</a> to support your agents by suggesting
replies and sending the agent&#39;s messages to the conversation session.</p>
<h3 id='chat-automation-usage-end-a-conversation'>End a conversation</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://chat.ultimate.ai/api/v2/automation'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Basic {basicAuthToken}'</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json;charset=UTF-8'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{"botId":"{botId}","conversationId":"{conversationId}","eventType":"endSession"}'</span> <span class="se">\</span>
  <span class="nt">--compressed</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">endConversation</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">https://chat.ultimate.ai/api/v2/automation</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Basic {basicAuthToken}</span><span class="dl">'</span>
            <span class="p">},</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">botId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{botId}</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">conversationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{conversationId}</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">eventType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">endSession</span><span class="dl">'</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">);</span>

<span class="nx">endConversation</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div>
<p>To end new conversation (ie: when the visitor closes the chat widget, leaves the page, 
or any other event that should end the conversation session) send a request with 
the <code>eventType: endSession</code>. </p>

<p>If the conversation does not end with the <code>endSession</code> event, it will automatically
end after 2 hours.</p>
<h1 id='intent-recognition'>Intent Recognition</h1>
<p>Send a visitor message from a chat or any type of text to get a 
list of matching intents with their confidences as well as a list of 
entities we extracted from the text. 
Use this endpoint to classify or label any piece of text.</p>
<h2 id='intent-recognition-http-request'>HTTP Request</h2>
<p>Method: <code>POST</code></p>

<p>Endpoint: <code>/api/intents</code></p>
<h2 id='intent-recognition-authorization'>Authorization</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://chat.ultimate.ai/api/intents'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: {accessToken}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span>
    <span class="dl">'</span><span class="s1">https://chat.ultimate.ai/api/intents</span><span class="dl">'</span><span class="p">,</span> 
    <span class="p">{</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{accessToken}</span><span class="dl">'</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
<p>To use our Intent Recognition API a header named <code>authorization</code> needs to be set.</p>

<p>You can find your access token in the dashboard in your bots settings under &quot;Tokens&quot;.</p>

<p>If you are not a client yet, you request your Access Token to try out the API from 
<a href="https://ultimate.ai">here</a>.</p>

<aside class="notice">
Please do not share your access tokens with other users or applications and don't publish them in public code repositories.
</aside>
<h2 id='intent-recognition-request'>Request</h2>
<p>Send your request as a JSON with MIME-type of application/json.</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"botId"</span><span class="p">:</span><span class="s2">"1a2b3c4d5e6f7g8h9i0j1k2l"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"this is a message"</span><span class="p">,</span><span class="w"> 
   </span><span class="nl">"conversationId"</span><span class="p">:</span><span class="s2">"12345678987654321"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>botId</strong></td>
<td>string</td>
<td>true</td>
<td>ID of the bot that will sends the reply.<br />You can find the ID of your bot in our dashboard, or talk to your Customer Success Manger.</td>
</tr>
<tr>
<td><strong>message</strong></td>
<td>string</td>
<td>true</td>
<td>The text message that the visitor typed into the chat.</td>
</tr>
<tr>
<td><strong>conversationId</strong></td>
<td>string</td>
<td>false</td>
<td>An ID used by the chat provider to identify the conversation.<br />The chat provider can decide the format.</td>
</tr>
</tbody></table>
<h2 id='intent-recognition-response'>Response</h2>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"intents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.64636783599853516</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"intent A"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.54660784006118774</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"intent B"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.34867138862609863</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"intent C"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1374831646680832</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"intent D"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1208697184920311</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"intent E"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w">
            </span><span class="nl">"form"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name.surname@mail.com"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"610abae77bf221077b4fc51e"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sanitize"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The endpoint will respond with a JSON with the following format:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>intents</strong></td>
<td>array[<code>Intent</code>]</td>
<td>Array containing intents that were predicted for the <code>message</code> sent in the request.<br /><br />Each object of type <code>Intent</code> contains the following fields:<br /><strong>name</strong> <code>string</code> - the intent&#39;s name<br /><strong>confidence</strong> <code>float</code> - Float value between 0 and 1 - giving the confidence with which this intent was predicted for the given <code>message</code>.</td>
</tr>
<tr>
<td><strong>entities</strong></td>
<td>array [<code>Entity</code>]</td>
<td>Array of entities that were recognized from the visitor message given in the request.<br /><br />Each object of type <code>Entity</code> will have the following fields:<br /><strong>name</strong> <code>string</code> - Name of the recognized entity<br /><strong>confidence</strong> <code>float</code> - Float value between 0 and 1 - giving the confidence with which this entity was recognized for the given <code>message</code>.<br /><strong>form</strong> <code>string</code> - Form of the entity recognized in the given <code>message</code>.<br /><strong>index</strong> <code>number</code> - TODO Index of the entity recognized.<br /><strong>id</strong> <code>number</code> - Identifier of the entity recognized.<br /><strong>sanitize</strong> <code>boolean</code> - Boolean marking if entity is sanitized.</td>
</tr>
</tbody></table>
<h2 id='intent-recognition-usage'>Usage</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://chat.ultimate.ai/api/intents'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Basic {basicAuthToken}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json;charset=UTF-8'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{"botId":"{botId}","conversationId":"{conversationId}","message":"{message}"}'</span> <span class="se">\</span>
  <span class="nt">--compressed</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">getIntents</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span>
        <span class="dl">'</span><span class="s1">https://chat.ultimate.ai/api/intents</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Basic {basicAuthToken}</span><span class="dl">'</span>
            <span class="p">},</span>
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
                <span class="na">botId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{botId}</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{message}</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">conversationId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">{conversationId}</span><span class="dl">'</span>
            <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">);</span>

<span class="nx">getIntents</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
